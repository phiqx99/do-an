<div class="row" *ngIf="!list">
    <div class="col-sm-12">
        <div class="page-header card">
            <div class="row align-items-end">
                <div class="col-lg-8">
                    <div class="page-header-title">
                        <h4 style="margin-bottom: 20px;">Danh sách phân quyền</h4>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Quyền</th>
                            <th>Nhóm</th>
                            <th>Mô tả</th>
                            <th>
                                <div style="float: right;">
                                    <button (click)="gotoCre()" class="btn btn-primary btn-sm"><i
                                            class="icofont icofont-plus"></i></button>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of items; let i = index">
                            <th scope="row">{{((pagedResult.pageNo-1) * pagedResult.pageSize) + i + 1 }}</th>
                            <td>{{item.nameRole}}</td>
                            <td>{{item.nameGroup}}</td>
                            <td>{{item.description}}</td>
                            <td>
                                <div style="float: right;">
                                    <button (click)="gotoEdit(item.id)" style="margin-right: 5px;"
                                        class="btn btn-success btn-sm " id="button"><i
                                            class="icofont icofont-edit"></i></button>
                                    <button (click)="gotoDel(item.id)" class="btn btn-danger btn-sm "><i
                                            class="icofont icofont-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div *ngIf="pagedResult">
                <app-pagination (pageSizeChange)="pageSizeChange($event)" [defaultPageSize]="pageSize"
                    [pagedResult]="pagedResult" (pagedResultChange)="pagedResultChange($event)">
                </app-pagination>
            </div>
            <div class="d-flex justify-content-center">
                <div class="spinner-border" role="status" *ngIf="loading">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" *ngIf="formCre">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-center">
                    <div class="spinner-border" role="status" *ngIf="loading">
                        <span class="sr-only" *ngIf="loading">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="card-block">
                <div class="card-header">
                    <h4 class="sub-title">Thêm quyền mới</h4>

                </div>
                <form [formGroup]="permissionForm" (ngSubmit)="OnSubmit()">
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Quyền</label>
                        <div class="col-sm-10">
                            <select name="RoleId" class="form-control" formControlName="RoleId">
                                <option *ngFor="let item of lstNameRole" [ngValue]="item.id">{{item.name}}</option>
                            </select>
                            <!-- <input type="text" name="RoleId" class="form-control" placeholder="Quyền"
                                    formControlName="RoleId" required> -->
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Nhóm</label>
                        <div class="col-sm-10">
                            <!-- <select name="GroupId" class="form-control" formControlName="GroupId">
                                <option *ngFor="let item of lstNameGroup" [ngValue]=item.id>{{item.name}}
                                </option>
                            </select> -->
                            <!-- <input type="text" name="GroupId" class="form-control" placeholder="GroupId"
                                    formControlName="GroupId" required> -->
                            <input class="form-control" placeholder="Tìm kiếm" type="text" list="lstu" (input)="searchChange($event)">
                            <datalist id="lstu">
                                <option *ngFor="let l of listG" [value]="l.name">{{l.name}}
                                </option>
                            </datalist>
                        </div>
                    </div>
                    <button style="margin-left: 10px;" type="submit" [disabled]="!permissionForm.valid"
                        class="btn btn-primary btn-round float-right">Xác nhận</button>
                    <button (click)="back()" class="btn btn-inverse btn-round float-right" id="button">Hủy</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row" *ngIf="formUp">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-center">
                    <div class="spinner-border" role="status" *ngIf="loading">
                        <span class="sr-only" *ngIf="loading">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="card-block">
                <div class="card-header">
                    <h4 class="sub-title">Cập nhật quyền</h4>

                </div>
                <form [formGroup]="permissionForm" (ngSubmit)="OnUpdate()">
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Quyền</label>
                        <div class="col-sm-10">
                            <select name="RoleId" class="form-control" formControlName="RoleId" disabled>
                                <option *ngFor="let item of lstNameRole" [ngValue]="item.id">{{item.name}}</option>
                            </select>

                            <!-- <input type="text" name="RoleId" class="form-control" placeholder="RoleId"
                                    formControlName="RoleId" value="lstNameValue.name" readonly> -->
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Nhóm</label>
                        <div class="col-sm-10">
                            <select name="GroupId" class="form-control" formControlName="GroupId">
                                <option *ngFor="let item of lstNameGroup" [ngValue]=item.id>{{item.name}}
                                </option>
                            </select>
                            <!-- <input type="text" name="GroupId" class="form-control" placeholder="GroupId"
                                    formControlName="GroupId" required> -->
                        </div>
                    </div>

                    <button style="margin-left: 10px;" type="submit" [disabled]="!permissionForm.valid"
                        class="btn btn-success btn-round float-right">Cập nhật</button>
                    <button (click)="back()" class="btn btn-inverse btn-round float-right" id="button">Hủy</button>
                </form>
            </div>
        </div>
    </div>
</div>